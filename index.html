<!DOCTYPE html>
<html>
<head>
    <title>Auto-Populate DocuSign URL</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Master Services Agreement</h1>
        <form id="docusignForm">
            <label for="customerName">Customer Business Name:</label>
            <input type="text" id="customerName" name="customerName"><br><br>

            <label for="entityType">Entity Type:</label>
            <input type="text" id="entityType" name="entityType"><br><br>

            <label for="signersName">Signer's Name:</label>
            <input type="text" id="signersName" name="signersName"><br><br>

            <label for="title">Title:</label>
            <input type="text" id="title" name="title"><br><br>

            <label for="customerEmail">Customer Email:</label>
            <input type="email" id="customerEmail" name="customerEmail"><br><br>

            <label for="customerAddress">Customer Address:</label>
            <input type="text" id="customerAddress" name="customerAddress"><br><br>

            <button type="button" onclick="generateUrlAndRedirect()">Submit</button>
        </form>
    </div>

    <script>
        // Function to get the current month name
        function getCurrentMonth() {
            const monthNames = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];
            const now = new Date();
            return monthNames[now.getMonth()];
        }

        // Function to get the current day with ordinal suffix
        function getCurrentDay() {
            const now = new Date();
            const day = now.getDate();
            if (day > 3 && day < 21) return day + 'th'; // Special case for 11th to 13th
            switch (day % 10) {
                case 1: return day + "st";
                case 2: return day + "nd";
                case 3: return day + "rd";
                default: return day + "th";
            }
        }

        // Function to get the two-digit year
        function getCurrentYear() {
            const now = new Date();
            return now.getFullYear().toString().slice(-2);
        }

        // Function to generate the full URL and redirect
        function generateUrlAndRedirect() {
            // PowerForm URL base with embedded Admin_UserName, Admin_Email, Company_UserName, and Company_Email
            const powerFormBaseUrl = "https://demo.docusign.net/Member/PowerFormSigning.aspx?PowerFormId=81f14450-68ea-4b59-8ad5-10b251d9443a&env=demo&acct=f21b983b-0e82-4b5d-8733-0d3d3c71b5af&v=2&Admin_UserName=Fred%20Murray&Admin_Email=fred@giddydigs.com&Company_UserName=Nick%20Long&Company_Email=nick@giddydigs.com";

            // Get input values
            const customerBusinessName = document.getElementById("customerName").value;
            const entityType = document.getElementById("entityType").value;
            const signersName = document.getElementById("signersName").value;
            const title = document.getElementById("title").value;
            const customerEmail = document.getElementById("customerEmail").value;
            const customerAddress = document.getElementById("customerAddress").value;

            // Generate the full URL with all required data
            const fullUrl = `${powerFormBaseUrl}&Month=${getCurrentMonth()}&Day=${getCurrentDay()}&YY=${getCurrentYear()}&Customer=${encodeURIComponent(customerBusinessName)}&Entity%20Type=${encodeURIComponent(entityType)}&Customer_UserName=${encodeURIComponent(signersName)}&CustomerUsername=${encodeURIComponent(signersName)}&title=${encodeURIComponent(title)}&Customer_Email=${encodeURIComponent(customerEmail)}&customerAddress=${encodeURIComponent(customerAddress)}`;

            // Redirect to the generated URL
            window.location.href = fullUrl;
        }
    </script>
</body>
</html>
